

2018.7.26
	实现简单的任务调度，去掉了ucos中其他代码，只留下了任务调度功能
	自己写了任务初始化，任务结构体，优先级管理，带任务调度的系统延时等
	使用双堆栈
	使用stm32f103
2018.7.31
	使用任务调度重写集中器程序
	使用多条协议
	集中器上记录了设备的类型和状态，
	按键使用了定时器4，
2018.8.1
	可以和上位机通信，优化网口内存占用，可以在C8T6上运行
2018.8.2
	重写了设备控制逻辑，一旦有设备控制成功即改变集中器的状态指示
		无论是手动控制还是自动控制，
	加入了自动控制，每30秒检测一次环境值与设定值得差异，超出限制就启动控制
	加入手动自动的转换
	加入消息检测函数，如果网口有消息没有读取（处于断线重连中），就不再向网口发送消息，以免阻塞消息通路
2018.8.15
	加入配置项
2018.8.16
	程序功能全部实现
	设备为开启状态才会给上位机发送消息
	设备连续5次查询超时才会被确认为离线状态
	手动操作设备失败会执行10次尝试，
	使用新的无线通信协议
	集中器会记录设备的状态，设备操作成功集中器上的指示灯状态才会变
2018.8.17
	修复串口屏显示湿度值错误的问题
	修复集中器地址为0时，控制器只能开不能关的问题
	修改MAC地址，解决网络丢包的问题
	解决手动控制时无线接收函数的数组越界问题
2018.8.18
	修复无线的FLASH存储地址和LCD存储地址重复所导致的设备地址在LCD屏幕设置之后会改变的问题
2018.9.12
	更改为IAP程序
2018.9.14
	加入空闲中断，提高命令接收成功率
2018.9.15
	更改flash写入算法，适应不同块大小的flash
	集中器可以通过配置软件进入配置模式
	加入软件版本查询
2018.9.17
	修复软件编译时间显示不全的问题
	进入硬件中断之后自动重启
	去除不是配置模式仍然可以进行配置的BUG
	加入重启命令
2018.9.21
	兼容R8与RC芯片的程序，改了一半，注释了灯光任务
	内存分配可以自适应不同的芯片型号，系统内核使用10kb的内存，剩余的内存全部用来做内存分配
2018.9.30
	添加恒湿机
2018.10.8
	替换malloc.h文件，解决在R8T6型号上初始化内存失败的BUG
	设备初始化为离线状态
	控制时首先判断离线，提高控制速度
2018.10.9
	融合了beep，文件系统
	替换my_key.c文件，长按K3播放一首音乐，长按K1开启与关闭自动控制任务，长按K2控制灯带
	长按K2灯带熄灭为自动模式，灯带旋转为手动模式，进入手动页面时显示最新的手动自动状态
2018.10.11
	自定义数字转字符函数，解决json温湿度输出始终为0的bug
2018.10.12
	添加进入退出配置模式函数，
	添加信道转换函数，没有使用
2018.10.16
	申请足够的内存，解决蜂鸣器音乐播放异常的BUG
2018.11.5
	更改集中器适应新版的板子
	解决在屏幕上关屏幕，在屏幕上不能再开的bug
2018.11.6
	新板子添加触摸按键
	优化屏幕睡眠控制逻辑，只在0~7秒内生效
	可以设置省电模式区间，屏幕会在区间起始处关，在终止处开，省电模式开关有效
	手动模式状态可以掉电保存
2018.11.15
	解决在设备数量较多时网口数据上传间隔过长的问题
	整理代码，合理安排驱动层和应用层的代码分配
2018.11.16
	操作系统部分分层清晰，分为CPU层，操作系统核心层，任务层
	单片机部分分为单片机内核层，硬件驱动层，
	合理定义消息函数，使其更易于编程
	重新规划程序逻辑，使其更合理，更清晰
	定义一个配置描述文件，文件名为wk_config.txt，
	拟实现温控的配置参数可以通过SD卡来配置，文件配置语法见“温控配置文件描述”文件
2018.11.17
	处理自动控制恒湿机时恒湿机的湿度为1或2的bug
2018.11.19
	拟实现温控的配置参数可以通过SD卡来配置，用json文件，配置语法见“温控配置文件描述”文件
2018.11.23
	加入新版环绕灯PWM调光
2018.12.3
	将新版上位机协议加入进来，新板子只支持第二种协议
	加入第二种协议需要修改的地方如下：
		串口屏设置参数的时候向上位机报告修改后的值
		环境值检测到超标时向上位机报告超标信息
		设备返回值附带了漏水报警向上位机报告漏水报警
	测试结果：
		串口屏修改参数后会上传修改后的数据，为了保证数据上传成功，多点几次确定
		环境值超标报警正常
		漏水报警正常
		上位机设置环境上下限正常
		上位机设置手动自动模式正常
		上位机控制设备正常
	解决网络端口没有连接上时ping不通的bug
	加入端口1，udp连接，用来发送调试信息等，测试成功
2018.12.4
	受FLASH影响，把配置信息存储位置设置到(0x8040000-1024),因此此程序能用于RC型号的芯片
	加入调试信息，网口端口1,使用UDP模式与网络中端口7000通信，上电时集中器会主动发送一次本机参数
2018.12.5
	重新做存储空间分配，文件系统位置改到(0x8040000-1024*16)
2018.12.7
	加入DHCP成功，重新组织网络部分代码
2018.12.8
	与服务器断线后可以快速重连
	如果没有配置本机ip地址，系统自动向网关获取动态的IP地址
	在每次重连成功之后发送设备上线消息
2018.12.8
	重新组织与上位机的消息交互代码，规范通信协议上位机协议再次更新
	自适应调试主机的IP地址和端口，当调试主机收不到集中器的消息时只需要向255.255.255.255:12地址发送任意消息
2018.12.9
	实时任务调度
2018.12.10
	实现了自动获取服务器地址
	解决了在实时任务调度时可能是由于数据发送时间过快导致的网口消息发送不全的问题，
	解决方式是在发送数据的后面加入一个500us的阻塞延时
2018.12.13
	添加了DNS，修改自动获取服务器地址时错误的操作，修改彩灯缓冲为一个灯
2018.12.14
	与上位机的数据交换协议改为新版
2018.12.15
	实现连接到百度云并可以更新数据
2018.12.21
	由消息阻塞导致的不发送上位机消息的BUG
	在滴答定时器中判断是否一直在不可调度状态，超过一秒就强行解除，此为下下策，最好永远不要运行到那里去
	不可调度函数加入任务记录，记录进入不可调度状态的任务
	添加json字符串有消息判断，不完整的json字符串不解析
	任务结构体添加任务挂起标志，修改任务挂起函数
	网络接收数据发送数据等函数加入不可调度临界区
	网口发送和接收函数添加微妙级延时，防止数据发送不完整
2019.1.16
	解决自动获取服务器IP地址和端口失败的bug
2019.1.18
	与上位机通信相关bug处理。
	添加新的环绕灯调光
	rf控制和传输逻辑与V2.3版本相同
	通过网口设置无限信道
	使用定时器3的硬件PWM调光
2019.1.19
	环绕灯可以渐变调光，
	按键按下时长越长环绕灯越亮
	任务调度进行优化修改，解决任务挂起无效，延时函数无效的问题
2019.1.21
	自动控制加了一个超调量，自动关闭设备的条件是环境参数超过了超调量







